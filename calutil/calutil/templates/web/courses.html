{% extends "base.html" %}

{% block content %}
    <div class="panel scrollable">
        <ul id="course" class="nav nav-list">
        </ul>
        <ul class="nav nav-list">
            <li>
                <a href="#" id="more">More</a>
            </li>
        </ul>
    </div>
{% endblock %}
{% block extra_script %}
    <script>
        $(function(){
            var view = new CourseListView({el: $("#course"),collection:new CourseCollection({{object.id}})});
            //every time the more button is clicked, add some more courses
            $("#more").click(function(){
                var text = $(this).html(), link = $(this);
                var element = $(this);
                $(this).html("Loading...");
                view.fetch({
                    success: function(){
                        element.html(text);
                    },
                    complete: function(){
                        element.remove();
                    }
                });
                return false;
            });
        });
    </script>
    <script type="text/template" id="course_template">
        {% include "web/course.html" %}
    </script>
{% endblock %}
